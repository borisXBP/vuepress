(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{564:function(t,e,r){"use strict";r.r(e);var _=r(2),v=Object(_.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"react"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" React")]),t._v(" "),r("ul",[r("li",[t._v("单一数据源")])]),t._v(" "),r("p",[t._v("整个应用的 state 被储存在一棵 object tree 中，并且这个 object tree 只存在于唯一一个 store 中。")]),t._v(" "),r("ul",[r("li",[t._v("State 是只读的")])]),t._v(" "),r("p",[t._v("惟一改变 state 的方法就是触发 action，action 是一个用于描述已发生事件的普通对象。")]),t._v(" "),r("ul",[r("li",[t._v("使用纯函数来执行修改")])]),t._v(" "),r("p",[t._v("为了描述 action 如何改变 state tree，你需要编写 reducers。"),r("br"),t._v("\nReducer 只是一些纯函数，它接收先前的 state 和 action，并返回新的 state。")]),t._v(" "),r("h2",{attrs:{id:"cpu-的瓶颈"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cpu-的瓶颈"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://react.iamkasong.com/preparation/idea.html#cpu%E7%9A%84%E7%93%B6%E9%A2%88",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),r("OutboundLink")],1),t._v(" CPU 的瓶颈")]),t._v(" "),r("p",[t._v("当项目变得庞大、组件数量繁多时，就容易遇到 CPU 的瓶颈。")]),t._v(" "),r("p",[t._v("考虑如下 Demo，我们向视图中渲染 3000 个"),r("code",[t._v("li")]),t._v("：")]),t._v(" "),r("p",[t._v("主流浏览器刷新频率为 60Hz，即每（1000ms / 60Hz）16.6ms 浏览器刷新一次。")]),t._v(" "),r("p",[t._v("我们知道，JS 可以操作 DOM，"),r("code",[t._v("GUI渲染线程")]),t._v("与"),r("code",[t._v("JS线程")]),t._v("是互斥的。所以"),r("strong",[t._v("JS 脚本执行")]),t._v("和"),r("strong",[t._v("浏览器布局、绘制")]),t._v("不能同时执行。")]),t._v(" "),r("p",[t._v("在每 16.6ms 时间内，需要完成如下工作：")]),t._v(" "),r("p",[t._v("当 JS 执行时间过长，超出了 16.6ms，这次刷新就没有时间执行"),r("strong",[t._v("样式布局")]),t._v("和"),r("strong",[t._v("样式绘制")]),t._v("了。")]),t._v(" "),r("p",[t._v("在 Demo 中，由于组件数量繁多（3000 个），JS 脚本执行时间过长，页面掉帧，造成卡顿。")]),t._v(" "),r("p",[t._v("可以从打印的执行堆栈图看到，JS 执行时间为 73.65ms，远远多于一帧的时间。")]),t._v(" "),r("blockquote",[r("p",[t._v("备案 © 2022 Boris 个人网站 | "),r("a",{attrs:{href:"https://beian.miit.gov.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("粤 ICP 备 20061538 号"),r("OutboundLink")],1),t._v(" | 保留所有权利")])])])}),[],!1,null,null,null);e.default=v.exports}}]);