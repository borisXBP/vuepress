(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{563:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"webpack-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-原理"}},[t._v("#")]),t._v(" webpack 原理")]),t._v(" "),a("p",[t._v("在深入实战前先要知道 webpack 的运行原理")]),t._v(" "),a("h3",{attrs:{id:"webpack-核心概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-核心概念"}},[t._v("#")]),t._v(" webpack 核心概念")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("entry")]),t._v(" 一个可执行模块或库的入口文件。")]),t._v(" "),a("li",[a("code",[t._v("chunk")]),t._v(" 多个文件组成的一个代码块，例如把一个可执行模块和它所有依赖的模块组合和一个 "),a("code",[t._v("chunk")]),t._v(" 这体现了 webpack 的打包机制。")]),t._v(" "),a("li",[a("code",[t._v("loader")]),t._v(" 文件转换器，例如把 es6 转换为 es5，scss 转换为 css。")]),t._v(" "),a("li",[a("code",[t._v("plugin")]),t._v(" 插件，用于扩展 webpack 的功能，在 webpack 构建生命周期的节点上加入扩展 hook 为 webpack 加入功能。")])]),t._v(" "),a("h3",{attrs:{id:"webpack-构建流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-构建流程"}},[t._v("#")]),t._v(" webpack 构建流程")]),t._v(" "),a("p",[t._v("从启动 webpack 构建到输出结果经历了一系列过程，它们是：")]),t._v(" "),a("ol",[a("li",[t._v("解析 webpack 配置参数，合并从 shell 传入和"),a("code",[t._v("webpack.config.js")]),t._v("文件里配置的参数，生产最后的配置结果。")]),t._v(" "),a("li",[t._v("注册所有配置的插件，好让插件监听 webpack 构建生命周期的事件节点，以做出对应的反应。")]),t._v(" "),a("li",[t._v("从配置的"),a("code",[t._v("entry")]),t._v("入口文件开始解析文件构建 AST 语法树，找出每个文件所依赖的文件，递归下去。")]),t._v(" "),a("li",[t._v("在解析文件递归的过程中根据文件类型和 loader 配置找出合适的 loader 用来对文件进行转换。")]),t._v(" "),a("li",[t._v("递归完后得到每个文件的最终结果，根据"),a("code",[t._v("entry")]),t._v("配置生成代码块"),a("code",[t._v("chunk")]),t._v("。")]),t._v(" "),a("li",[t._v("输出所有"),a("code",[t._v("chunk")]),t._v("到文件系统。")])]),t._v(" "),a("p",[t._v("需要注意的是，在构建生命周期中有一系列插件在合适的时机做了合适的事情，比如"),a("code",[t._v("UglifyJsPlugin")]),t._v("会在 loader 转换递归完后对结果再使用"),a("code",[t._v("UglifyJs")]),t._v("压缩覆盖之前的结果。")]),t._v(" "),a("h2",{attrs:{id:"场景和方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景和方案"}},[t._v("#")]),t._v(" 场景和方案")]),t._v(" "),a("p",[t._v("通过各种场景和对应的解决方案让你深入掌握 webpack")]),t._v(" "),a("h3",{attrs:{id:"单页应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单页应用"}},[t._v("#")]),t._v(" 单页应用")]),t._v(" "),a("p",[a("strong",[t._v("demo "),a("a",{attrs:{href:"https://github.com/gwuhaolin/redemo",target:"_blank",rel:"noopener noreferrer"}},[t._v("redemo"),a("OutboundLink")],1)]),a("br"),t._v("\n一个单页应用需要配置一个"),a("code",[t._v("entry")]),t._v("指明执行入口，webpack 会为"),a("code",[t._v("entry")]),t._v("生成一个包含这个入口所有依赖文件的"),a("code",[t._v("chunk")]),t._v("，但要让它在浏览器里跑起来还需要一个 HTML 文件来加载"),a("code",[t._v("chunk")]),t._v("生成的 js 文件，如果提取出了 css 还需要让 HTML 文件引入提取出的 css。"),a("a",{attrs:{href:"https://github.com/gwuhaolin/web-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("web-webpack-plugin"),a("OutboundLink")],1),t._v("里的"),a("code",[t._v("WebPlugin")]),t._v("可以自动的完成这些工作。")]),t._v(" "),a("p",[t._v("webpack 配置文件")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" WebPlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"web-webpack-plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/doc/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一个WebPlugin对应生成一个html文件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//输出的html文件名称")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这个html依赖的`entry`")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("requires")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[a("code",[t._v("requires: ['doc']")]),t._v("指明这个 HTML 依赖哪些"),a("code",[t._v("entry")]),t._v("，"),a("code",[t._v("entry")]),t._v("生成的 js 和 css 会自动注入到 HTML 里。"),a("br"),t._v("\n你还可以配置这些资源的注入方式，支持如下属性：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("_dist")]),t._v(" 只有在生产环境下才引入该资源")]),t._v(" "),a("li",[a("code",[t._v("_dev")]),t._v(" 只有在开发环境下才引入该资源")]),t._v(" "),a("li",[a("code",[t._v("_inline")]),t._v(" 把该资源的内容潜入到 html 里")]),t._v(" "),a("li",[a("code",[t._v("_ie")]),t._v(" 只有 IE 浏览器才需要引入的资源")])]),t._v(" "),a("blockquote",[a("p",[t._v("备案 © 2022 Boris 个人网站 | "),a("a",{attrs:{href:"https://beian.miit.gov.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("粤 ICP 备 20061538 号"),a("OutboundLink")],1),t._v(" | 保留所有权利")])])])}),[],!1,null,null,null);s.default=n.exports}}]);